{
  "entities": {
    "User": {
      "title": "User",
      "description": "Represents a user of the application.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity, matches Firebase Auth UID."
        },
        "organizationId": {
            "type": "string",
            "description": "The ID of the organization the user belongs to."
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "roleId": {
            "type": "string",
            "description": "The ID of the role assigned to the user."
        },
        "branchIds": {
            "type": "array",
            "items": { "type": "string" },
            "description": "An array of branch IDs the user is associated with."
        },
        "status": {
            "type": "string",
            "enum": ["active", "suspended"],
            "description": "The status of the user account."
        },
        "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the user was created."
        }
      },
      "required": ["id", "email", "fullName", "roleId", "status", "organizationId", "createdAt"]
    },
    "Role": {
        "title": "Role",
        "description": "Defines a user role and its associated permissions.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "organizationId": { "type": "string" },
            "name": { "type": "string" },
            "systemRole": { "type": "boolean" },
            "permissions": {
                "type": "array",
                "items": { "type": "string" }
            }
        },
        "required": ["id", "name", "systemRole", "permissions"]
    },
    "AuditLog": {
        "title": "Audit Log",
        "description": "Logs administrative actions performed on users.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "action": { "type": "string" },
            "performedBy": { "type": "string" },
            "targetUserId": { "type": "string" },
            "organizationId": { "type": "string" },
            "timestamp": { "type": "string", "format": "date-time" }
        },
        "required": ["id", "action", "performedBy", "organizationId", "timestamp"]
    },
    "Borrower": {
      "title": "Borrower",
      "description": "Represents a borrower in the microfinancing system.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The unique identifier of the borrower."
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the borrower."
        },
        "dateOfBirth": {
          "type": "string",
          "format": "date",
          "description": "The borrower's date of birth."
        },
        "gender": {
          "type": "string",
          "enum": [
            "Male",
            "Female",
            "Other"
          ]
        },
        "nationalId": {
          "type": "string",
          "description": "The national identification number of the borrower."
        },
        "phone": {
          "type": "string",
          "description": "The borrower's phone number."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The borrower's email address."
        },
        "address": {
          "type": "string",
          "description": "The borrower's physical address."
        },
        "employmentStatus": {
          "type": "string",
          "enum": [
            "Employed",
            "Self-employed",
            "Unemployed"
          ]
        },
        "monthlyIncome": {
          "type": "number",
          "description": "The borrower's monthly income."
        },
        "photoUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL to the borrower's photo."
        },
        "branchId": {
          "type": "string",
          "description": "The ID of the branch the borrower belongs to."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who created this borrower."
        }
      },
      "required": [
        "id",
        "fullName",
        "nationalId",
        "phone",
        "branchId",
        "userId"
      ]
    },
    "Loan": {
      "title": "Loan",
      "description": "Represents a loan in the microfinancing system.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "borrowerId": {
          "type": "string"
        },
        "loanProductId": {
          "type": "string"
        },
        "principal": {
          "type": "number"
        },
        "interestRate": {
          "type": "number"
        },
        "totalPayable": {
          "type": "number"
        },
        "installmentAmount": {
          "type": "number"
        },
        "duration": {
          "type": "number"
        },
        "issueDate": {
          "type": "string",
          "format": "date"
        },
        "status": {
          "type": "string",
          "enum": [
            "Draft",
            "Pending Approval",
            "Approved",
            "Active",
            "Completed",
            "Rejected"
          ]
        },
        "loanOfficerId": {
          "type": "string"
        },
        "branchId": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "borrowerId",
        "loanProductId",
        "principal",
        "issueDate",
        "loanOfficerId",
        "branchId",
        "status",
        "duration",
        "interestRate",
        "totalPayable",
        "installmentAmount"
      ]
    },
    "LoanProduct": {
      "title": "Loan Product",
      "description": "Defines a type of loan product offered.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "category": {
          "type": "string"
        },
        "minAmount": {
          "type": "number"
        },
        "maxAmount": {
          "type": "number"
        },
        "interestRate": {
          "type": "number"
        },
        "duration": {
          "type": "number"
        },
        "repaymentCycle": {
          "type": "string",
          "enum": [
            "Weekly",
            "Monthly"
          ]
        }
      },
      "required": [
        "id",
        "name",
        "interestRate",
        "duration",
        "minAmount",
        "maxAmount",
        "repaymentCycle"
      ]
    },
    "Installment": {
      "title": "Installment",
      "description": "Represents a single repayment installment for a loan.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "loanId": {
          "type": "string"
        },
        "installmentNumber": {
          "type": "number"
        },
        "dueDate": {
          "type": "string",
          "format": "date"
        },
        "expectedAmount": {
          "type": "number"
        },
        "paidAmount": {
          "type": "number"
        },
        "status": {
          "type": "string",
          "enum": [
            "Paid",
            "Unpaid",
            "Partial",
            "Overdue"
          ]
        }
      },
      "required": [
        "id",
        "loanId",
        "dueDate",
        "expectedAmount",
        "installmentNumber",
        "paidAmount",
        "status"
      ]
    },
    "Repayment": {
      "title": "Repayment",
      "description": "Represents a payment made for a loan.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "loanId": {
          "type": "string"
        },
        "amount": {
          "type": "number"
        },
        "paymentDate": {
          "type": "string",
          "format": "date"
        },
        "collectedById": {
          "type": "string"
        },
        "method": {
          "type": "string",
          "enum": [
            "Cash",
            "Bank Transfer",
            "Mobile Money"
          ]
        }
      },
      "required": [
        "id",
        "loanId",
        "amount",
        "paymentDate",
        "collectedById"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user data, including roles and permissions."
        }
      },
       {
        "path": "/roles/{roleId}",
        "definition": {
          "entityName": "Role",
          "schema": { "$ref": "#/backend/entities/Role" },
          "description": "Stores role definitions and permissions."
        }
      },
      {
        "path": "/auditLogs/{logId}",
        "definition": {
          "entityName": "AuditLog",
          "schema": { "$ref": "#/backend/entities/AuditLog" },
          "description": "Stores audit trails for important user actions."
        }
      },
      {
        "path": "/borrowers/{borrowerId}",
        "definition": {
          "entityName": "Borrower",
          "schema": {
            "$ref": "#/backend/entities/Borrower"
          },
          "description": "Stores information about individual borrowers."
        }
      },
      {
        "path": "/loans/{loanId}",
        "definition": {
          "entityName": "Loan",
          "schema": {
            "$ref": "#/backend/entities/Loan"
          },
          "description": "Stores individual loan records."
        }
      },
      {
        "path": "/loans/{loanId}/installments/{installmentId}",
        "definition": {
          "entityName": "Installment",
          "schema": {
            "$ref": "#/backend/entities/Installment"
          },
          "description": "Stores installments for a specific loan."
        }
      },
      {
        "path": "/loanProducts/{loanProductId}",
        "definition": {
          "entityName": "LoanProduct",
          "schema": {
            "$ref": "#/backend/entities/LoanProduct"
          },
          "description": "Stores loan product definitions."
        }
      },
      {
        "path": "/repayments/{repaymentId}",
        "definition": {
          "entityName": "Repayment",
          "schema": {
            "$ref": "#/backend/entities/Repayment"
          },
          "description": "Stores repayment records."
        }
      }
    ]
  }
}